<div class="container-fluid profile-container" style="background-image: url('assets/wallpaper1.jpg');">
    <div class="row">
        <div class="col-md-6 offset-md-3 text-center">
            <div class="image-upload">
                <label for="file-input">
                    <img class="img img-fluid profile-pic" src="{{profilePic}}" />
                    <span class="hover-text">Change Picture</span>
                </label>
                <input id="file-input" accept="image/png, image/jpeg" type="file" (change)="onFileChange($event)" />
            </div>
            <div>
                <h1>{{auth.user?.first_name}} {{auth.user?.last_name}}</h1>
            </div>
        </div>
        <div class="col-md-3 mt-auto">
            <button class="btn" (click)="toggleEdit()">Edit Profile</button>
        </div>
    </div>
    <div class="row profile-update">
        <div class="col-md-12">
            <form [formGroup]="profileForm" (ngSubmit)="onSubmit(form)" #form>
                <div class="row add-spacing">
                    <div class="col">
                        <label for="username">Username:</label>
                        <input type="text" class="form-control" placeholder="Username" formControlName="username">
                        <div class="validation-errors">
                            <ng-container *ngFor="let validation of ValidationMessagesRef.username">
                                <div class="error-message"
                                    *ngIf="this.profileForm.controls?.['username']?.hasError(validation.type) && (this.profileForm.controls?.['username']?.touched)">
                                    {{ validation.message }}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <div class="col">
                        <label for="fullname">Fullname:</label>
                        <input type="fullname" class="form-control" placeholder="John Doe" formControlName="fullName">
                        <div class="validation-errors">
                            <ng-container *ngFor="let validation of ValidationMessagesRef.fullName">
                                <div class="error-message"
                                    *ngIf="this.profileForm.controls?.['fullName']?.hasError(validation.type) && (this.profileForm.controls?.['fullName']?.touched)">
                                    {{ validation.message }}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="row add-spacing">
                    <div class="col">
                        <label for="country">Country:</label>
                        <input type="text" class="form-control" placeholder="Country" formControlName="country"
                            maxlength="50">
                        <div class="validation-errors">
                            <ng-container *ngFor="let validation of ValidationMessagesRef.country">
                                <div class="error-message"
                                    *ngIf="this.profileForm.controls?.['country']?.hasError(validation.type) && (this.profileForm.controls?.['country']?.touched)">
                                    {{ validation.message }}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <div class="col">
                        <label for="city">City:</label>
                        <input type="text" class="form-control" placeholder="City" formControlName="city"
                            maxlength="50">
                        <div class="validation-errors">
                            <ng-container *ngFor="let validation of ValidationMessagesRef.city">
                                <div class="error-message"
                                    *ngIf="this.profileForm.controls?.['city']?.hasError(validation.type) && (this.profileForm.controls?.['city']?.touched)">
                                    {{ validation.message }}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="row add-spacing">
                    <div class="col">
                        <label for="date_of_birth">Date of Birth:</label>
                        <input type="date" class="form-control" placeholder="Date of Birth"
                            formControlName="dateOfBirth">
                        <div class="validation-errors">
                            <ng-container *ngFor="let validation of ValidationMessagesRef.dateOfBirth">
                                <div class="error-message"
                                    *ngIf="this.profileForm.controls?.['dateOfBirth']?.hasError(validation.type) && (this.profileForm.controls?.['dateOfBirth']?.touched)">
                                    {{ validation.message }}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <div class="col">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" placeholder="abc@xyz.com" formControlName="email">
                        <div class="validation-errors">
                            <ng-container *ngFor="let validation of ValidationMessagesRef.email">
                                <div class="error-message"
                                    *ngIf="this.profileForm.controls?.['email']?.hasError(validation.type) && (this.profileForm.controls?.['email']?.touched)">
                                    {{ validation.message }}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="row add-spacing">
                    <div class="col">
                        <label for="address">Address:</label>
                        <input type="textarea" class="form-control" placeholder="Address" formControlName="address"
                            maxlength="100">
                        <div class="validation-errors">
                            <ng-container *ngFor="let validation of ValidationMessagesRef.address">
                                <div class="error-message"
                                    *ngIf="this.profileForm.controls?.['address']?.hasError(validation.type) && (this.profileForm.controls?.['address']?.touched)">
                                    {{ validation.message }}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="row mb-2">
                        <div class="col-md-4 offset-md-4">
                            <button type="submit" [disabled]="profileForm.invalid || !edit"
                                class="btn submit-btn">Update Profile</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>